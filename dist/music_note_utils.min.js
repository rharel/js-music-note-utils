"use strict";!function(){function t(t,n,e){this._index=t,this._index_in_octave=n,this._letter=e}function n(t,n){this._shift=t,this._symbol=n}function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.None,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;this._pitch_class=t,this._accidental=n,this._octave=e}var i=440;t.prototype={constructor:t,get index(){return this._index},get index_in_octave(){return this._index_in_octave},get letter(){return this._letter}},t.list=[new t(0,9,"A"),new t(1,11,"B"),new t(2,0,"C"),new t(3,2,"D"),new t(4,4,"E"),new t(5,5,"F"),new t(6,7,"G")];var r={get A(){return r.with_index(0)},get B(){return r.with_index(1)},get C(){return r.with_index(2)},get D(){return r.with_index(3)},get E(){return r.with_index(4)},get F(){return r.with_index(5)},get G(){return r.with_index(6)},with_index:function(n){return t.list[n]}};n.prototype={get shift(){return this._shift},get symbol(){return this._symbol}},n.None=new n(0,""),n.Sharp=new n(1,"#"),n.Flat=new n(-1,"b");var o={get None(){return n.None},get Sharp(){return n.Sharp},get Flat(){return n.Flat}};e.prototype={constructor:e,clone:function(){return new e(this._pitch_class,this._accidental,this._octave)},equals:function(t){return this.index()===t.index()},transpose:function(t){return new e.from_index(this.index()+t)},natural:function(){return new e(this._pitch_class,o.None,this._octave)},sharp:function(){return new e(this._pitch_class,o.Sharp,this._octave)},flat:function(){return new e(this._pitch_class,o.Flat,this._octave)},index:function(){return this.C4_index()-9},C4_index:function(){return 12*(this._octave-4)+this._pitch_class.index_in_octave+this._accidental.shift},midi_number:function(){return this.index()+69},frequency:function(){return c.to_frequency(this.index())},is_accidental:function(){return this._accidental!==o.None},is_natural:function(){return!this.is_accidental()},to_string:function(){return this._pitch_class.letter+this._accidental.symbol+this._octave},get pitch_class(){return this._pitch_class},get accidental(){return this._accidental},get octave(){return this._octave}},e.from_frequency=function(t){return e.from_index(c.from_frequency(t))},e.from_index=function(t){return t=Math.round(t),new e(c.to_pitch_class(t),c.is_accidental(t)?o.Sharp:o.None,c.to_octave(t))},e.from_midi_number=function(t){return e.from_index(t-69)},e.from_string=function(t){if(0===t.length)return null;var n=t[0];if(!r.hasOwnProperty(n))return null;var i=r[n];if(1===t.length)return new e(i);var c=void 0;switch(t[1]){case o.Sharp.symbol:c=o.Sharp;break;case o.Flat.symbol:c=o.Flat;break;default:c=o.None}if(2===t.length&&c!==o.None)return new e(i,c,4);var u=void 0;return u=c!==o.None?parseInt(t.slice(2)):parseInt(t.slice(1)),isNaN(u)?null:new e(i,c,u)},e.A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._A(t,n)},e.B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._B(t,n)},e.C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._C(t,n)},e.D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._D(t,n)},e.E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._E(t,n)},e.F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._F(t,n)},e.G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e._G(t,n)},function(){t.list.forEach(function(t){e["_"+t.letter]=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.None,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return new e(t,n,i)}})}();var c={from_frequency:function(t){var n=Math.log2;return(0,Math.round)(12*n(t/i))},to_frequency:function(t){return Math.pow(2,t/12)*i},to_pitch_class:function(){var t=[0,0,1,2,2,3,3,4,5,5,6,6];return function(n){return r.with_index(t[c.normalize(n)])}}(),to_octave:function(t){var n=t+9;return 4+Math.floor(n/12)},is_accidental:function(){var t=[1,4,6,9,11];return function(n){return t.includes(c.normalize(n))}}(),normalize:function(t){var n=t%12;return n<0?12+n:n}};window.MusicNoteUtilities={PitchClass:r,Accidental:o,Note:e,NoteIndex:c,get A4_frequency(){return i},set A4_frequency(t){i=+t}}}();